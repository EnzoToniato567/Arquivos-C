//biblioteca

#include <stdio.h>
#include <locale.h>
#include <string.h>

typedef struct Veiculo {
    int id;
    char marca[20];
    char modelo[20];
    int ano;
    float valor;
    int combustivel; 
    char cor[15];
} Veiculo;

Veiculo veiculos[10];   
int total = 0;          

void clear();
void cadastrar_veiculo();
void listar_veiculos();
void buscar_id();
void filtrar_combustivel();
void finaliza_funcao();
void menu_combustivel();

int main() {
    
    int opcao;

    do {
        clear();
        printf("----Menu de cadastro----\n");
        printf("1 - Cadastrar veículo\n");
        printf("2 - Listar veículos\n");
        printf("3 - Buscar por ID\n");
        printf("4 - Filtrar por tipo de combustível\n");
        printf("0 - Sair\n");
        printf("Escolha uma opção:\n");
        scanf("%d", &opcao);

        switch (opcao) {
            case 1:
                cadastrar_veiculo();
                break;
            case 2:
                listar_veiculos();
                break;
            case 3:
                buscar_id();
                break;
            case 4:
                filtrar_combustivel();
                break;
            case 0:
                printf("Você escolheu sair do programa.\n");
                break;
            default:
                printf("Opção inválida.\n");
                finaliza_funcao();
        }
    } while (opcao != 0);

    return 0;
}

void clear() { //Essa parte eu procurei buscar mais alguma coisa que deixaria mais facilitado o código
    if (system("clear")) system("cls");
}

void finaliza_funcao() {
    printf("Pressione Enter para continuar...\n");
    getchar(); 
    getchar(); 
}

void mostrar_menu_combustivel() {
    printf("Tipos de combustível:\n");
    printf("1 - Gasolina\n");
    printf("2 - Etanol\n");
    printf("3 - Diesel\n");
    printf("4 - GNV\n");
    printf("5 - Elétrico\n");
}

void cadastrar_veiculo() {
    clear();
    if (total >= 10) {
        printf("Limite de veículos atingido.\n");
        finaliza_funcao();
        return;
    }

    printf("----Veículo novo----\n");
    
    printf("ID:\n");
    scanf("%d", &veiculos[total].id);
    
    printf("Marca:\n");
    scanf("%s", veiculos[total].marca);
    
    printf("Modelo:\n");
    scanf("%s", veiculos[total].modelo);
    
    printf("Ano:\n");
    scanf("%d", &veiculos[total].ano);
    
    printf("Valor:\n");
    scanf("%f", &veiculos[total].valor);
   
    mostrar_menu_combustivel();
    printf("Digite o número correspondente:\n");
    scanf("%d", &veiculos[total].combustivel);
    
    printf("Cor:\n");
    scanf("%s", veiculos[total].cor);

    total++;
    printf("O novo veículo foi cadastrado.\n");
    finaliza_funcao();
}

void listar_veiculos() {
    clear();
    printf("Veículos cadastrados:\n");
    if (total == 0) {
        printf("Nenhum veículo cadastrado.\n");
    }
    for (int i = 0; i < total; i++) {
        printf("ID: %d\n", veiculos[i].id);
        
        printf("Marca: %s\n", veiculos[i].marca);
        
        printf("Modelo: %s\n", veiculos[i].modelo);
        
        printf("Ano: %d\n", veiculos[i].ano);
        
        printf("Valor: R$ %.2f\n", veiculos[i].valor);
        
        printf("Combustível: %d\n", veiculos[i].combustivel);
        
        printf("Cor: %s\n", veiculos[i].cor);
        printf("-------------------------\n");
    }
    finaliza_funcao();
}

void buscar_id() {
    clear();
    int id;
    int achado = 0;

    printf("Digite o ID do veículo para buscar:\n");
    scanf("%d", &id);

    for (int i = 0; i < total; i++) {
        if (veiculos[i].id == id) {
            
        printf("ID: %d\n", veiculos[i].id);
        achado = 1;
        break;
        }
    }

    if (achado == 0) {
        printf("O ID do veículo não foi encontrado.\n", id);
    }

    finaliza_funcao();
}

void filtrar_combustivel() {
    clear();
    int tipo;
    int achado = 0;

    menu_combustivel();
    printf("Digite o número do combustível:\n");
    scanf("%d", &tipo);

    for (int i = 0; i < total; i++) {
        if (veiculos[i].combustivel == tipo) {
        printf("ID: %d\n", veiculos[i].id);
        
        printf("Marca: %s\n", veiculos[i].marca);
        
        printf("Modelo: %s\n", veiculos[i].modelo);
        
        printf("Ano: %d\n", veiculos[i].ano);
        
        printf("Valor: R$ %.2f\n", veiculos[i].valor);
        
        printf("Combustível: %d\n", veiculos[i].combustivel);
        
        printf("Cor: %s\n", veiculos[i].cor);
        
        printf("-------------------------\n");
        achado = 1;
        }
    }

    if (achado == 0) {
        printf("Nenhum veículo abastecido com esse combustível.\n");
    }

    finaliza_funcao();
}
